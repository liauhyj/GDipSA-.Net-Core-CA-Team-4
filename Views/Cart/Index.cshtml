@{ ViewData["Title"] = "Home Page";
    List<Product> products = (List<Product>)ViewData["products"];
    List<CartDetail> cartDetails = (List<CartDetail>)ViewData["cart"];
}


@section Scripts
{
    <script src="~/js/cart/index.js"></script>
}

<div style="height:30px;">
    <span style="float: left">
        <strong> VIEW CART</strong> | <a href="/Home/Index">Continue Shopping </a> | <a href="/Checkout/Index">Checkout</a>
    </span>
    <span style="float:right" id="totalPrice"></span>
</div>
@{
    if (cartDetails == null)
    {
        <div align="center">
            <span style="font-size:20px">
                There is nothing in your cart!
                Browse our products <a href="/">here</a> now! :)
            </span>
        </div>
    }

    else
    {
        <span style=" float:right">
            Total: $ <span id="cTotal">
                @{
                    int sum = 0;
                    foreach (CartDetail cd in cartDetails)
                    {
                        sum = sum + cd.Product.Price * cd.Quantity;
                    }
                }
                @sum
            </span>
        </span>


        <table align="center">
            <tr>
                <td align="center">
                    Product
                </td>
                <td>
                </td>
                <td align="center">
                    Quantity
                </td>
                <td>
                </td>
                <td align="center">
                    Price
                </td>

            </tr>
            @foreach (var cd in cartDetails)

            {

                <tr>
                    <td>
                        <div>

                            <div class="card bg-light m-3" style="float: left; border: 1px solid black; text-align: center; padding: 10px 10px; width: 220px; height: 300px; border-radius:5px;">
                                <div class="card-header">

                                    <img src="@cd.Product.Image" width="100" /> <br />

                                </div>
                                <div class="card-body">

                                    <h5 class="card-title">@cd.Product.Name </h5>
                                    <div class="card-text">
                                        <div style="height:60px; text-align:left; font-size:12pt;">
                                            @cd.Product.Description
                                        </div>
                                        <br />
                                        <br />
                                        <br />

                                    </div>

                                </div>
                            </div>



                        </div>
                    </td>
                    <td>
                        <button class="updatecartquantity" product_id="@cd.ProductId" plus="false">-</button>
                    </td>
                    <td align="center">
                        <div id="number_@cd.ProductId">
                            @cd.Quantity
                        </div>
                    </td>
                    <td>
                        <button class="updatecartquantity" product_id="@cd.ProductId" plus="true">+</button>
                    </td>
                    <td align="center">

                        <span>
                            $<span id="Total_@cd.ProductId">
                                @{ int displayPrice = cd.Product.Price * cd.Quantity; }
                                @displayPrice
                            </span>
                        </span>


                    </td>
                    <td>
                        <form id="form" action="/Cart/Remove" method="POST">
                            <input type="hidden" name="productId" value="@cd.ProductId" />
                            <input type="Submit" value="Remove" class="btn btn-primary" />
                        </form>
                    </td>
                    <td>
                        <div>
                        </div>
                    </td>
                </tr>


            }

        </table>

    }
}
