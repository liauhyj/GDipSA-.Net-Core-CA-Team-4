@{ ViewData["Title"] = "Home Page";
    List<Product> products = (List<Product>)ViewData["products"];
    List<CartDetail> cartDetails = (List<CartDetail>)ViewData["cart"];
}


@section Scripts
{
    <script src="~/js/cart/index.js"></script>
}



<span style="float:left; font-size:48px;">

</span>
<span style="float:right" id="totalPrice">
</span>


@{
    if (cartDetails == null)
    {
        <div align="center">
            <span style="font-size:20px">
                There is nothing in your cart!
                Browse our products <a href="/">here</a> now! :)
            </span>
        </div>
    }

    else
    {

        <span style="float: right; font-size: 48px;">
            Total: $ <span id="cTotal">
                @{
                    int sum = 0;
                    foreach (CartDetail cd in cartDetails)
                    {
                        sum = sum + cd.Product.Price * cd.Quantity;
                    }
                }
                @sum
            </span>
        </span>



        <table class="table" align="center" ;>
            <thead class="thead-light">
                <tr>
                    <th style="text-align:center; font-size:20px; font-weight:900;">Product</th>
                    <th scope="col"> </th>
                    <th style="text-align:center;font-size:20px; font-weight:900;"> Quantity</th>
                    <th scope="col"> </th>
                    <th style="text-align:center;font-size:20px; font-weight:900;">Price </th>
                    <th scope="col"> </th>
                    <th scope="col"> </th>

                </tr>
            </thead>

            <tbody style="text-align:center;">
                @foreach (var cd in cartDetails)

                {

                    <tr>
                        <td>
                            <div>

                                <div class="card bg-light m-3" style="float: left; border: 1px solid black; text-align: center; padding: 10px 10px; width: 220px; height: 300px; border-radius:5px;">
                                    <div class="card-header">

                                        <img src="@cd.Product.Image" width="100" /> <br />

                                    </div>
                                    <div class="card-body">

                                        <h5 class="card-title">@cd.Product.Name </h5>
                                        <div class="card-text">
                                            <div style="height:60px; text-align:left; font-size:12pt;">
                                                @cd.Product.Description
                                            </div>
                                            <br />
                                            <br />
                                            <br />

                                        </div>

                                    </div>
                                </div>



                            </div>
                        </td>
                        <td>
                            <div style="padding-top:160px;"></div>
                            <button style="border-radius:20%; font-size:24px;" class="updatecartquantity btn btn-primary" product_id="@cd.ProductId" plus="true">-</button>
                        </td>
                        <td>
                            <div style="padding-top:160px;"></div>
                            <div style="font-weight:900; font-size:24px;" id="number_@cd.ProductId">
                                @cd.Quantity
                            </div>
                        </td>
                        <td>
                            <div style="padding-top:160px;"></div>
                            <button style="border-radius:20%; font-size:24px;" class="updatecartquantity btn btn-primary" product_id="@cd.ProductId" plus="true">+</button>
                        </td>
                        <td>
                            <div style="padding-top:160px;"></div>
                            <span style="font-size: 24px; font-weight: 900; ">
                                $<span id="Total_@cd.ProductId">
                                    @{ int displayPrice = cd.Product.Price * cd.Quantity; }
                                    @displayPrice
                                </span>
                            </span>


                        </td>
                        <td>
                            <div style="padding-top:160px;"></div>
                            <form id="form" action="/Cart/Remove" method="POST" style="font-size:24px; font-size:large;">
                                <input type="hidden" name="productId" value="@cd.ProductId" />
                                <input type="Submit" value="Remove" class="btn btn-danger" />
                            </form>
                        </td>
                        <td>
                            <div>
                            </div>
                        </td>
                    </tr>



                }
            </tbody>
        </table>
        <div style="height:30px;">
            <span style="float: left">
                <a href="/Home/Index" class="btn btn-primary" role="button"><strong> Continue Shopping </strong></a>
            </span>
            <span style="float: right">
                <a href="/Checkout/Index" onclick="return checkLogin();" class="btn btn-success" role="button"><strong>Checkout</strong> </a>
            </span>
        </div>
    }
}



